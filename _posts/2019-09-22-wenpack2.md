---
layout: post
title: webpack4入门
categories: tools
description: webpack学习笔记
keywords: webpack4, 前端工程化 
---


webpack4学习笔记二：webpack入门

### 1、资源解析

#### 1.1 解析ES6

解析需要使用`babel-loader`

安装：
```
  npm install babel-loader -D
  npm install @babel/core -D
  npm install @babel/preset-env -D
```

设置babel对ES6的转换

新建一个文件，根目录下`.babelrc`
里面输入：

```
  {
    "presets": [
      "@babel/preset-env"
    ]
  }
```

然后设置webpack，在`webpack.config.js`里面

```
  module.exports = {
    module:{
      rules: [
        {
          test: /.js$/,
          use: 'babel-loader'
        }
      ]
    }
  }
```
#### 1.2 解析CSS、less、sass

解析less、sass需要使用到css-loader，style-loader。

安装

```
   npm install css-loader style-loader --dev
```

配置webpack

```
  module:{
    rules: [
      {
        test: /.js$/,
        use: 'babel-loader'
      },
      {
        test: /.css$/,
        use: ['style-loader', 'css-loader']
      }
    ]
  },
```

需要注意的是，use的解析是从右到左解析的，所以我们需要先设置`style-loader`，后设置`css-loader`，因为我们需要先使用css-loader解析然后传给style-loader。

解析less，less和sass差不多，这里写less

安装：`npm install less less-loader --dev`

配置：

```
  module:{
    rules: [
      {
        test: /.js$/,
        use: 'babel-loader'
      },
      {
        test: /.css$/,
        use: ['style-loader', 'css-loader']
      },
      {
        test: /.less$/,
        use: ['style-loader', 'css-loader', 'less-loader']
      }
    ]
  },
```

#### 1.3 解析图片or文件

解析图片需要用到一个`file-loader`，这个loader就是用于处理文件的。

安装：`npm install file-loader --dev`

使用:

```
  module:{
    rules: [
      {
        test: /.js$/,
        use: 'babel-loader'
      },
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader']
      },
      {
        test: /.less$/,
        use: ['style-loader', 'css-loader', 'less-loader']
      },
      {
        test: /.(png|jpg|gif)$/,
        use: 'file-loader'
      }
    ]
  },
```

字体文件和图片差不多。

```
  module:{
    rules: [
      {
        test: /.js$/,
        use: 'babel-loader'
      },
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader']
      },
      {
        test: /.less$/,
        use: ['style-loader', 'css-loader', 'less-loader']
      },
      {
        test:/.(png|jpg|gif)$/,
        use: 'file-loader'
      },
      {
        test: /.(woff|woff2|eot|ttf|otf)$/,
        use: 'file-loader'
      }
    ]
  },
```

#### 1.4 url-loader

url-loader也可以处理图片和字体，可以设置较小资源自动base64.
url-loader内部也有使用file-loader

```
  module:{
    rules: [
      {
        test:/.(png|jpg|gif)$/,
        use: {
          loader: 'url-loader',
          options: {
            limit: 10240
          }
        }
      }
    ]
  },
```





