---
layout: post
title: pymysql模块
categories: Python
description: pymysql模块
keywords: pymysql模块
---

pymysql模块,python连接数据库

### 1、pymysql模块

支持python代码操作数据库

安装

```py
pip3 install pymysql
```

### 2、使用

```py
import pymysql
from pymysql.cursors import Cursor

conn = pymysql.connect(
  host ='127.0.0.1',
  port = 3306,
  user = 'root',
  password ='mysql',
  database= 'db1',
  charset ='utf8'
)
 # 产生一个游标对象
cursor = conn.cursor()

sql = 'select * from t1;'

res = cursor.execute(sql)

# print(res)  # 返回sql语句影响的条数

# print(cursor.fetchone())  # 只拿一条数据
print(cursor.fetchall())  # 全拿 
# print(cursor.fetchmany(2))  # 指定拿多少条
# ((1, 'www'), (2, 'eee'))
```

这种数据不太好处理，可以修改为字典格式，方便看。

```py
cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)
```

数据每次读取都是索引递增的，所以每获取一次，下次获取都是接着上次的获取，想要修改读取位置的话可以使用`cursor.scroll()`

```py
# 相对移动(relative) 在当前索引的位置向后移动一位
cursor.scroll(1, 'relative')

# 绝对(absolute)  在起始位置开始移动
cursor.scroll(1, 'absolute')
```
